
AuthService(NowObject)
   handle_login
   handle_foo


    foo ->    446777
    lambda x: ... -> 5463634534
    foo <- 446777
    SomeOtherClass.foo -> 45345345



io.loop()

=====

class MQBConnection
    lookup_map ... UUID 

class SanitizerService():
    def __init__(self):
        pass
    
    def sendMessage(self, message):
        ... ?

###

class SanitizerFactory():
    def __init__(self):
        pass
    
    def createSanitizer(self, callback, room):
        callback( Sanitizer(room) ) 

####

class Sanitizer():
    def __init__(self, room):
        self.room = room
    
    def sendMessage(self, message):
        room.sendMessage(message.uppercase())

##

class RoomCreator():
    def joinRoom(callback, roomname):
        room = makeRoom(roomname)
        
        sanitized_room = self.stored_SanitizerFactory.createSanitizer(room)
        callback( sanitized_room )

def bla(room):
    print 'GOT ROOM', room
    room.sendMessage('hello')

RoomCreator.joinRoom(bla, 'flotype')